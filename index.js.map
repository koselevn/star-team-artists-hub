{"version":3,"file":"index.js","sources":["../src/js/header.js","../src/js/render.js","../src/js/api.js","../src/js/artists.js"],"sourcesContent":["const menuButton = document.querySelector('[data-menu-open]');\nconst closeButton = document.querySelector('[data-menu-close]');\nconst menu = document.querySelector('.mob-menu');\n\nmenuButton.addEventListener('click', () => {\n  menu.classList.add('is-open');\n  document.body.style.overflow = 'hidden';\n});\n\ncloseButton.addEventListener('click', () => {\n  menu.classList.remove('is-open');\n  document.body.style.overflow = '';\n});\ndocument.querySelector('.logo').addEventListener('click', function() {\n  window.location.href = 'index.html';\n});\n\nconst header = document.querySelector('.page-header');\n\nwindow.addEventListener('scroll', () => {\n  const scrollY = window.scrollY;\n  const maxFade = 250; \n  const opacity = Math.max(0, 1 - scrollY / maxFade);\n  header.style.setProperty('--gradient-opacity', opacity);\n});","// const artistInfoEl = document.querySelector(\".modal-artist-content\");\nconst artistsEl = document.querySelector(\"#artist-cards\");\n\nfunction createArtistsCartTemplate(artist) {\n    const genreList = !artist.genres || artist.genres.length === 0\n        ? '<li></li>'\n        : artist.genres.map(genre => `<li class=\"genre-chip\">${genre}</li>`).join('');\n\n    return `\n        <li class=\"artist-card\" data-artist-id=\"${artist._id}\">\n            <img class=\"artist-photo\" src=\"${artist.strArtistThumb}\" alt=\"artist photo\">\n            <ul class=\"artist-genre-list\">\n                ${genreList}\n            </ul>\n            <h4 class=\"artist-name\">${artist.strArtist}</h4>\n            <p class=\"artist-info\">${artist.strBiographyEN}</p>\n            <button class=\"artist-button learn-more-btn\" data-artist-id=\"${artist._id}\">Learn More\n                <svg class=\"artist-button-icon\" width=\"24\" height=\"24\">\n                    <use href=\"../img/about-us-img/about-us.svg#icon-icon\"></use>\n                </svg>\n            </button>\n        </li>\n    `;\n}\n\nexport function renderArtists(artists, container = artistsEl) {\n    if (!Array.isArray(artists) || !artists.length) return;\n    const markup = artists.map(artist => createArtistsCartTemplate(artist)).join('');\n    container.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showLoadMoreButton(button) {\n    button.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton(button) {\n    button.classList.add('is-hidden');\n}\n\nexport function showLoader(loader = document.querySelector('.preloader-box')) {\n    if (loader) loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader(loader = document.querySelector('.preloader-box')) {\n    if (loader) loader.classList.add('is-hidden');\n}\n\nfunction msToMinSec(ms) {\n    let totalSeconds = Math.floor(ms / 1000);\n    let minutes = Math.floor(totalSeconds / 60);\n    let seconds = totalSeconds % 60;\n    return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;\n}\n\n\n\n\n// export function createArtistInfo(artists) {\n//     const markup = artists.map(artist => {\n//         const genreList = !artist.genres || artist.genres.length === 0\n//             ? '<li></li>'\n//             : artist.genres.map(genre => `<li class=\"artist-genre-item\">${genre}</li>`).join('');\n\n//         const years = artist.intFormedYear && artist.intFormedYear !== \"null\"\n//             ? `${artist.intFormedYear} - ${(!artist.intDiedYear || artist.intDiedYear === \"null\") ? 'present' : artist.intDiedYear}`\n//             : 'information missing';\n\n        \n//         const albumList = !artist.albumsList || artist.albumsList.length === 0\n//             ? '<li>There are no any album</li>'\n//             : artist.albumsList.map(album => {\n//                 const trackList = !album.tracks || album.tracks.length === 0\n//                     ? '<li>There are no any track</li>'\n//                     : album.tracks.map(track => `\n//       <li class=\"track\">\n//         <span class=\"track-name\">${track.strTrack}</span>\n//         <span class=\"track-time\">${msToMinSec(track.intDuration)}</span>\n//         <a class=\"track-link\" href=\"${!track.movie || track.movie === \"null\" ? '#' : track.movie}\">\n//           <svg class=\"icon\" width=\"20.01\" height=\"14.01\">\n//             <use href=\"../img/icon-for-modal-artist.svg#icon-youtube-btn\"></use>\n//           </svg>\n//         </a>\n//       </li>\n//     `).join('');\n            \n//                 return `\n//         <li class=\"album\" >\n//         <h2 class=\"album-title\">${album.strAlbum}</h2>\n//           <div class=\"tracks-header\">\n//             <span>Track</span>\n//             <span>Time</span>\n//             <span>Link</span>\n//           </div>\n//           <ul class=\"track-list\">\n//             ${trackList}\n//           </ul>\n//         </li>\n//         `;\n//             }).join('');\n\n\n    \n//         return `\n// <h2 class=\"modal-artist-name\">${artist.strArtist}</h2>\n//       <div class=\"modal-artist-about\">\n//         <img\n//           class=\"modal-artist-photo\"\n//           src=\"${artist.strArtistThumb}\"\n//           alt=\"men\"\n//         />\n//         <div>\n//           <div class=\"modal-artist-info\">\n//             <h3 class=\"modal-artist-title\">Years active</h3>\n//             <p class=\"modal-artist-title-descr\">${years}</p>\n//             <h3 class=\"modal-artist-title\">Sex</h3>\n//             <p class=\"modal-artist-title-descr\">${artist.strGender}</p>\n//             <h3 class=\"modal-artist-title\">Members</h3>\n//             <p class=\"modal-artist-title-descr\">${artist.intMembers}</p>\n//             <h3 class=\"modal-artist-title\">Country</h3>\n//             <p class=\"modal-artist-title-descr\">${artist.strCountry}</p>\n//           </div>\n//           <h3 class=\"modal-artist-title\">Biography</h3>\n//           <p class=\"modal-artist-title-descr\">\n//             ${artist.strBiographyEN}\n//           </p>\n//           <ul class=\"modal-artist-list\">\n//             ${genreList}\n//           </ul>\n//         </div>\n//       </div>\n//       <h3 class=\"modal-artist-album-title\">Albums</h3>\n//       <ul class=\"modal-artist-album\">\n//             ${albumList}        \n//       </ul>\n//     `;\n//     }).join('');\n//     artistInfoEl.innerHTML = markup;\n\n//     console.log(markup);\n// }\n\n\n\n\n\n// const artists = {\n//   \"_id\": \"65ada227af9f6d155db46908\",\n//   \"strArtistThumb\": \"https://ftp.goit.study/img/musicbox/artist/strArtistThumb_qvuxvs1347997318.jpg\",\n//   \"strArtist\": \"U2\",\n//   \"strLabel\": \"Island\",\n//   \"intFormedYear\": \"1976\",\n//   \"intDiedYear\": \"null\",\n//   \"genres\": [\n//     \"Rock\",\n//     \"Rock/Pop\"\n//   ],\n//   \"strGender\": \"Male\",\n//   \"intMembers\": \"4\",\n//   \"strCountry\": \"Dublin, Ireland\",\n//   \"strBiographyEN\": \"U2 are an Irish rock band from Dublin, formed in 1976. The group consists of Bono (lead vocals and rhythm guitar)...\",\n//   \"albumsList\": [\n//     {\n//       \"_id\": \"65ada232af9f6d1bc9a32189\",\n//       \"strAlbum\": \"Children of the Revolution\",\n//       \"intYearReleased\": \"2002\",\n//       \"tracks\": [\n//         {\n//           \"_id\": \"65ada232af9f6d155db46975\",\n//           \"strTrack\": \"Two Hearts Beat as One\",\n//           \"strArtist\": \"U2\",\n//           \"intDuration\": \"218400\",\n//           \"movie\": \"https://www.youtube.com/watch?v=8Iaz-wtKYpo or null\"\n//         }\n//       ]\n//     }\n//   ]\n// }","import axios from 'axios';\n\nconst baseurl = 'https://sound-wave.b.goit.study/api';\n\nexport async function getArtists(\n  page = 1,\n  name = null,\n  sortName = null,\n  genre = null,\n) {\n  try {\n    const endPoint = '/artists';\n    const url = baseurl + endPoint;\n\n    const params = {\n      limit: 8,\n      page,\n      name,\n      sortName,\n      genre,\n    };\n\n    const res = await axios.get(url, { params });\n    return res.data;\n  } catch (error) {\n    console.error('Error fetching artists:', error);\n  }\n}\n\nexport async function getArtist(id) {\n    const endPoint = `/artists/${id}`;\n  const url = baseurl + endPoint;\n    try {\n        const res = await axios.get(url);\n        return res.data;\n    } catch (error) {\n        console.error('Error fetching artist:', error);\n    }\n}\n\nexport async function getFeedbacks(page = 1) { \n    const endPoint = '/feedbacks';\n    const url = baseurl + endPoint;\n  const params = {\n      limit: 10,\n        page,\n    }\n    try {\n        const res = await axios.get(url, { params });\n        return res.data;\n    } catch (error) {\n        console.error('Error fetching feedbacks:', error);\n    }\n}","import { renderArtists, showLoadMoreButton, hideLoadMoreButton, showLoader, hideLoader } from './render.js';\nimport { getArtists } from './api.js';\n// import { openArtistModal } from './modal.js';      //<--------- будет мадалка\nimport iziToast from 'izitoast';\n\nconst LIMIT = 8;\nlet currentPage = 1;\n\nconst refs = {\n    cardsContainer: document.querySelector('#artist-cards'),\n    loadMoreBtn: document.querySelector('.btn-more'),\n};\n\n// Инициализация страницы\nasync function initArtists() {\n    try {\n        showLoader();\n        const data = await getArtists(currentPage);\n        if (!data || !Array.isArray(data.artists)) {\n            throw new Error('No artists found in the response');\n        }\n        renderArtists(data.artists, refs.cardsContainer);\n\n        if (data.totalArtists && currentPage * LIMIT < data.totalArtists) {\n            showLoadMoreButton(refs.loadMoreBtn);\n        } else {\n            hideLoadMoreButton(refs.loadMoreBtn);\n        }\n    } catch (err) {\n        console.error(err);\n        iziToast.error({\n            title: 'Error',\n            message: 'Не удалось загрузить артистов.',\n            position: 'topRight',\n            timeout: 3000,\n            titleColor: '#fff',\n            backgroundColor: '#d63031',\n            messageColor: '#fff',\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\n// Обработка клика по кнопке \"More\"\nasync function onLoadMoreBtnClick(event) {\n    event.target.blur();\n    currentPage++;\n    showLoader();\n\n    try {\n        const data = await getArtists(currentPage);\n        if (!data || !Array.isArray(data.artists)) {\n            throw new Error('No artists found in the response');\n        }\n        renderArtists(data.artists, refs.cardsContainer);\n\n        const firstNewCard = refs.cardsContainer.lastElementChild;\n        await new Promise(resolve => setTimeout(resolve, 100));\n        const cardHeight = firstNewCard.getBoundingClientRect().height;\n        window.scrollBy({ top: cardHeight * 1, behavior: 'smooth' });\n\n        if (data.totalArtists && currentPage * LIMIT >= data.totalArtists) {\n            iziToast.info({\n                title: '',\n                message: 'You see all Artists.',\n                position: 'topRight',\n                timeout: 4000,\n                titleColor: '#fff',\n                backgroundColor: '#764191',\n                messageColor: '#fff',\n            });\n            hideLoadMoreButton(refs.loadMoreBtn);\n            refs.loadMoreBtn.removeEventListener('click', onLoadMoreBtnClick);\n        }\n    } catch (err) {\n        console.error(err);\n        iziToast.error({\n            title: 'Error',\n            message: 'Houston we have a problem.',\n            position: 'topRight',\n            timeout: 3000,\n            titleColor: '#fff',\n            backgroundColor: '#d63031',\n            messageColor: '#fff',\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\n// Обработка клика по кнопке \"Learn More\"\nfunction onArtistCardClick(event) {\n    const learnMoreBtn = event.target.closest('.learn-more-btn');\n    if (!learnMoreBtn) return;\n\n    const artistId = learnMoreBtn.dataset.artistId;\n    if (!artistId) return;\n\n    // openArtistModal(artistId);    //<--------------- Open Modal Window\n}\n\ndocument.addEventListener('DOMContentLoaded', initArtists);\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreBtnClick);\nrefs.cardsContainer.addEventListener('click', onArtistCardClick);"],"names":["menuButton","closeButton","menu","header","scrollY","opacity","artistsEl","createArtistsCartTemplate","artist","genreList","genre","renderArtists","artists","container","markup","showLoadMoreButton","button","hideLoadMoreButton","showLoader","loader","hideLoader","baseurl","getArtists","page","name","sortName","url","params","axios","error","LIMIT","currentPage","refs","initArtists","data","err","iziToast","onLoadMoreBtnClick","event","firstNewCard","resolve","cardHeight","onArtistCardClick","learnMoreBtn"],"mappings":"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"}