import{a as m,S as C,N as E,A as B,P as S,i as d}from"./assets/vendor-BQjjM57f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}})();const p="https://sound-wave.b.goit.study/api";async function g(e=1,t=null,r=null,o=null){try{const n=p+"/artists",c={limit:8,page:e,name:t,sortName:r,genre:o};return(await m.get(n,{params:c})).data}catch(s){console.error("Error fetching artists:",s)}}async function M(e=1){const r=p+"/feedbacks",o={limit:10,page:e};try{return(await m.get(r,{params:o})).data}catch(s){console.error("Error fetching feedbacks:",s)}}const k=document.querySelector(".swiper-wrapper"),u=document.querySelector(".swiper-button-next"),f=document.querySelector(".swiper-button-prev"),a=document.querySelectorAll(".custom-pagination .dot");function P(e){const t=Math.round(e||0);let r="";for(let o=1;o<=5;o++){const s=o<=t?"#764191":"#D9D9D9";r+=`<span class="star" style="color: ${s};">★</span>`}return`<div class="feedback-rating">${r}</div>`}function q(e){return e.map(t=>`
        <li class="swiper-slide">
          ${P(t.rating)}
          <p class="slide-feedback">"${t.descr}"</p>
          <p class="feedback-author">${t.name}</p>
        </li>
      `).join("")}async function x(){try{const e=await M();if(e&&e.data&&e.data.length>0){const t=e.data.slice(0,10),r=q(t);k.insertAdjacentHTML("beforeend",r);const o=new C(".mySwiper",{modules:[E,B,S],slidesPerView:1,centeredSlides:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",dynamicBullets:!0,dynamicMainBullets:3},keyboard:{enabled:!0},on:{slideChange:function(){f.classList.toggle("swiper-button-disabled",this.isBeginning),u.classList.toggle("swiper-button-disabled",this.isEnd),a.forEach(s=>s.classList.remove("active")),this.activeIndex===0?a[0].classList.add("active"):this.activeIndex===9?a[2].classList.add("active"):a[1].classList.add("active")}},breakpoints:{0:{slidesPerView:1,loop:!1},768:{slidesPerView:1,loop:!1},1440:{slidesPerView:1,loop:!1}}});f.classList.add("swiper-button-disabled"),t.length<=1&&u.classList.add("swiper-button-disabled"),a.forEach(s=>{s.addEventListener("click",()=>{const n=s.dataset.index;n==="first"&&o.slideTo(0),n==="middle"&&o.slideTo(1),n==="last"&&o.slideTo(9)})}),a[0].classList.add("active")}}catch(e){console.log(e.message)}}x();const $=document.querySelector("[data-menu-open]"),T=document.querySelector("[data-menu-close]"),h=document.querySelector(".mob-menu");$.addEventListener("click",()=>{h.classList.add("is-open"),document.body.style.overflow="hidden"});T.addEventListener("click",()=>{h.classList.remove("is-open"),document.body.style.overflow=""});document.querySelector(".logo").addEventListener("click",function(){window.location.href="index.html"});const N=document.querySelector(".page-header");window.addEventListener("scroll",()=>{const e=window.scrollY,r=Math.max(0,1-e/250);N.style.setProperty("--gradient-opacity",r)});const I=document.querySelector("#artist-cards");function O(e){const t=!e.genres||e.genres.length===0?"<li></li>":e.genres.map(r=>`<li class="genre-chip">${r}</li>`).join("");return`
        <li class="artist-card" data-artist-id="${e._id}">
            <img class="artist-photo" src="${e.strArtistThumb}" alt="artist photo">
            <ul class="artist-genre-list">
                ${t}
            </ul>
            <h4 class="artist-name">${e.strArtist}</h4>
            <p class="artist-info">${e.strBiographyEN}</p>
            <button class="artist-button learn-more-btn" data-artist-id="${e._id}">Learn More
                <svg class="artist-button-icon" width="24" height="24">
                    <use href="../img/about-us-img/about-us.svg#icon-icon"></use>
                </svg>
            </button>
        </li>
    `}function y(e,t=I){if(!Array.isArray(e)||!e.length)return;const r=e.map(o=>O(o)).join("");t.insertAdjacentHTML("beforeend",r)}function F(e){e.classList.remove("is-hidden")}function b(e){e.classList.add("is-hidden")}function w(e=document.querySelector(".preloader-box")){e&&e.classList.remove("is-hidden")}function L(e=document.querySelector(".preloader-box")){e&&e.classList.add("is-hidden")}const v=8;let l=1;const i={cardsContainer:document.querySelector("#artist-cards"),loadMoreBtn:document.querySelector(".btn-more")};async function R(){try{w();const e=await g(l);if(!e||!Array.isArray(e.artists))throw new Error("No artists found in the response");y(e.artists,i.cardsContainer),e.totalArtists&&l*v<e.totalArtists?F(i.loadMoreBtn):b(i.loadMoreBtn)}catch(e){console.error(e),d.error({title:"Error",message:"Не удалось загрузить артистов.",position:"topRight",timeout:3e3,titleColor:"#fff",backgroundColor:"#d63031",messageColor:"#fff"})}finally{L()}}async function A(e){e.target.blur(),l++,w();try{const t=await g(l);if(!t||!Array.isArray(t.artists))throw new Error("No artists found in the response");y(t.artists,i.cardsContainer);const r=i.cardsContainer.lastElementChild;await new Promise(s=>setTimeout(s,100));const o=r.getBoundingClientRect().height;window.scrollBy({top:o*1,behavior:"smooth"}),t.totalArtists&&l*v>=t.totalArtists&&(d.info({title:"",message:"You see all Artists.",position:"topRight",timeout:4e3,titleColor:"#fff",backgroundColor:"#764191",messageColor:"#fff"}),b(i.loadMoreBtn),i.loadMoreBtn.removeEventListener("click",A))}catch(t){console.error(t),d.error({title:"Error",message:"Houston we have a problem.",position:"topRight",timeout:3e3,titleColor:"#fff",backgroundColor:"#d63031",messageColor:"#fff"})}finally{L()}}function j(e){const t=e.target.closest(".learn-more-btn");!t||t.dataset.artistId}document.addEventListener("DOMContentLoaded",R);i.loadMoreBtn.addEventListener("click",A);i.cardsContainer.addEventListener("click",j);
//# sourceMappingURL=index.js.map
